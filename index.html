<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenID Connect Demo</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
        <div class="logo">
            üîê
        </div>
        <h1>OpenID Connect</h1>
        <p class="subtitle">Demo Authentication Flow</p>

        <!-- Login Section -->
        <div id="loginSection" class="auth-section">
            <div class="flow-diagram">
                <h3 style="text-align: center; margin-bottom: 15px;">OpenID Connect Flow</h3>
                <div class="flow-step">
                    <div class="step-number">1</div>
                    <div>Client kh·ªüi t·∫°o authorization request</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">2</div>
                    <div>Authorization Server x√°c th·ª±c ng∆∞·ªùi d√πng</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">3</div>
                    <div>Tr·∫£ v·ªÅ authorization code</div>
                </div>
                <div class="flow-step">
                    <div class="step-number">4</div>
                    <div>Client ƒë·ªïi code l·∫•y ID Token & Access Token</div>
                </div>
            </div>

            <!-- Login Form -->
            <form id="loginForm" class="login-form" onsubmit="handleLogin(event)">
                <div class="form-group">
                    <label for="email">üìß Email</label>
                    <input 
                        type="email" 
                        id="email" 
                        name="email" 
                        placeholder="Nh·∫≠p email c·ªßa b·∫°n"
                        required
                    >
                </div>
                
                <div class="form-group">
                    <label for="password">üîí M·∫≠t kh·∫©u</label>
                    <input 
                        type="password" 
                        id="password" 
                        name="password" 
                        placeholder="Nh·∫≠p m·∫≠t kh·∫©u"
                        required
                    >
                </div>

                <div class="form-group">
                    <label for="fullname">üë§ H·ªç v√† t√™n</label>
                    <input 
                        type="text" 
                        id="fullname" 
                        name="fullname" 
                        placeholder="Nh·∫≠p h·ªç v√† t√™n"
                        required
                    >
                </div>

                <button type="submit" class="btn btn-primary">
                    <span id="loginText">üöÄ ƒêƒÉng nh·∫≠p</span>
                    <span id="loginLoader" class="loading hidden"></span>
                </button>
            </form>

            <div style="margin-top: 20px;">
                <button class="btn btn-secondary" onclick="showTokenInfo()">
                    üìã Xem th√¥ng tin Token
                </button>
            </div>
        </div>

        <!-- User Info Section -->
        <div id="userSection" class="auth-section hidden">
            <div class="alert alert-success">
                ‚úÖ ƒêƒÉng nh·∫≠p th√†nh c√¥ng!
            </div>
            
            <h2 id="welcomeMessage" style="margin: 15px 0;"></h2>
            
            <div class="user-info">
                <h3>üë§ Th√¥ng tin ng∆∞·ªùi d√πng</h3>
                <div class="info-item">
                    <span class="info-label">ID:</span>
                    <span class="info-value" id="userId"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Email:</span>
                    <span class="info-value" id="userEmail"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">T√™n:</span>
                    <span class="info-value" id="userName"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Iss (Issuer):</span>
                    <span class="info-value" id="userIss"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Aud (Audience):</span>
                    <span class="info-value" id="userAud"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Exp (Expires):</span>
                    <span class="info-value" id="userExp"></span>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="showTokenDetails()">
                üîç Chi ti·∫øt Token
            </button>
            
            <button class="btn btn-danger" onclick="logout()">
                üö™ ƒêƒÉng xu·∫•t
            </button>
        </div>

        <!-- Token Info Section -->
        <div id="tokenSection" class="auth-section hidden">
            <div class="user-info">
                <h3>üé´ Token Information</h3>
                <div class="info-item">
                    <span class="info-label">ID Token:</span>
                    <span class="info-value" id="idTokenDisplay"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Access Token:</span>
                    <span class="info-value" id="accessTokenDisplay"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Refresh Token:</span>
                    <span class="info-value" id="refreshTokenDisplay"></span>
                </div>
                <div class="info-item">
                    <span class="info-label">Token Type:</span>
                    <span class="info-value">Bearer</span>
                </div>
                <div class="info-item">
                    <span class="info-label">Scope:</span>
                    <span class="info-value">openid profile email</span>
                </div>
            </div>

            <button class="btn btn-secondary" onclick="backToLogin()">
                ‚Üê Quay l·∫°i
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>